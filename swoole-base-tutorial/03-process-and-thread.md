# 线程和进程

## 进程
* 对于操作系统来说，进程就是一个任务。
* 比如打开一个记事本，就启动了一个进程，打开两个浏览器就是两个进程。
* 查看进程可以使用 `ps` 命令查看。

## 线程
* 一个进程会同事做一些事情。
* 比如，word 可以同时进行打字和拼写检查。
* 在一个进程内部，同时运行着多个子任务，我们就可以称这些子任务为线程。
* 线程是操作系统最小的执行单元。

## 多任务的实现
* 启动多个进程。
* 启动一个进程，并在该进程内启动多个线程。
* 启动多个进程，每个进程内启动多个线程。

* apache 就是一种多进程的案例，当福进程收到新请求时，会 fork 出新的子进程来处理。
* Linux 的 fork 函数通过系统调用即可创建一个与原进程基本一样的进程。
* 对于多任务通常会使用 `Master-Worker` 模式。
* 一个 Master 进程负责分配任务，多个 Worker 进程负责执行任务。

## 多进程与多线程的区别
* 稳定性：
    * 多进程的优点就是稳定性很高，如果一个进程挂了，不会影响其他子进程。
    * 多线程是所以线程共享内存，当一个线程挂了，进程几乎就崩溃了。

* 性能：
    * 不论进程还是线程，启动太多都会带来 CPU 的调度问题。
    * 进程和线程切换很消耗资源。
    * 线程比进程要轻量，并且内存共享，不同线程交互容易实现。
    * 多进程之间的通信，需要借助消息队列，共享内存等复杂的方法才能实现。
